<!doctype html><html lang=en dir=auto><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="noindex, nofollow"><title>Between The Lines: Creating Interfaces Using Vectors | linar.dev</title>
<meta name=keywords content><meta name=description content="In the recent past, I&rsquo;ve talked about how you can create your own custom elements through mash generation, it will be useful to read to understand many aspects of this article.
And today, we will be creating custom elements for interfaces, but using the VectorApi in the UI Toolkit of the Unity engine.
After reading this article you will learn:


What is painter2D


How to create elements using it


How to surprise your colleagues with your knowledge of interface creation"><meta name=author content><link rel=canonical href=http://localhost:1313/posts/btl-creating-interface-elements-using-vector-api/><link crossorigin=anonymous href=/assets/css/stylesheet.fc220c15db4aef0318bbf30adc45d33d4d7c88deff3238b23eb255afdc472ca6.css integrity="sha256-/CIMFdtK7wMYu/MK3EXTPU18iN7/MjiyPrJVr9xHLKY=" rel="preload stylesheet" as=style><link rel=icon href=http://localhost:1313/favicon.ico><link rel=icon type=image/png sizes=16x16 href=http://localhost:1313/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=http://localhost:1313/favicon-32x32.png><link rel=apple-touch-icon href=http://localhost:1313/apple-touch-icon.png><link rel=mask-icon href=http://localhost:1313/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=http://localhost:1313/posts/btl-creating-interface-elements-using-vector-api/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=http://localhost:1313/ accesskey=h title="linar.dev (Alt + H)">linar.dev</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=http://localhost:1313/about/ title="About üëã"><span>About üëã</span></a></li><li><a href=http://localhost:1313/posts/ title="Posts üì∞"><span>Posts üì∞</span></a></li><li><a href=http://localhost:1313/archives title="Archive üóÇÔ∏è"><span>Archive üóÇÔ∏è</span></a></li><li><a href=http://localhost:1313/portfolio/ title="Portfolio üïπÔ∏è"><span>Portfolio üïπÔ∏è</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">Between The Lines: Creating Interfaces Using Vectors</h1><div class=post-meta><span title='2024-10-29 11:05:11 +0700 +07'>October 29, 2024</span>&nbsp;¬∑&nbsp;9 min</div></header><figure class=entry-cover><img loading=eager src=http://localhost:1313/posts/btl-creating-interface-elements-using-vector-api/0.png alt="The alt text"></figure><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#chapter-1-lines aria-label="Chapter 1: Lines!">Chapter 1: Lines!</a></li><li><a href=#chapter-2-curves aria-label="Chapter 2: Curves!">Chapter 2: Curves!</a></li><li><a href=#chapter-3-arcs aria-label="Chapter 3: Arcs!">Chapter 3: Arcs!</a></li><li><a href=#chapter-4-the-rest aria-label="Chapter 4: The rest?">Chapter 4: The rest?</a></li><li><a href=#chapter-5-conclusion aria-label="Chapter 5: Conclusion">Chapter 5: Conclusion</a></li></ul></div></details></div><div class=post-content><p>In the recent past, I&rsquo;ve talked about <a href=https://dtf.ru/gamedev/2215784-razdelyaem-i-vlastvuem-nad-interfeisami-v-unity>how you can create your own custom elements through mash generation</a>, it will be useful to read to understand many aspects of this article.</p><p>And today, we will be creating custom elements for interfaces, but using the <strong>VectorApi</strong> in the <strong>UI Toolkit</strong> of the <strong>Unity</strong> engine.</p><p>After reading this article you will learn:</p><ol><li><p>What is <strong>painter2D</strong></p></li><li><p>How to create elements using it</p></li><li><p>How to surprise your colleagues with your knowledge of interface creation</p></li></ol><h2 id=chapter-1-lines>Chapter 1: Lines!<a hidden class=anchor aria-hidden=true href=#chapter-1-lines>#</a></h2><p>Just like in the previous part, we will write our own classes, inheriting from the <a href=https://docs.unity3d.com/ScriptReference/UIElements.VisualElement.html>VisualElement</a> <em>(is the base class for creating a custom interface element)</em> class.</p><p>Let&rsquo;s go from simple to complex, using a code example:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span><span style=color:#66d9ef>using</span> UnityEngine;
</span></span><span style=display:flex><span><span style=color:#66d9ef>using</span> UnityEngine.UIElements;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>namespace</span> CustomElements
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>EmojiIconElement</span> : VisualElement
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>new</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>UxmlFactory</span> : UxmlFactory&lt;EmojiIconElement&gt; { }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>public</span> EmojiIconElement()
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            generateVisualContent += GenerateVisualContent;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>void</span> GenerateVisualContent(MeshGenerationContext mgc)
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> top = <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> left = <span style=color:#ae81ff>0f</span>;
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> right = contentRect.width;
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> bottom = contentRect.height;
</span></span><span style=display:flex><span>            
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> painter2D = mgc.painter2D;
</span></span><span style=display:flex><span>            painter2D.lineWidth = <span style=color:#ae81ff>10.0f</span>;
</span></span><span style=display:flex><span>            painter2D.strokeColor = Color.white;
</span></span><span style=display:flex><span>            painter2D.lineJoin = LineJoin.Bevel;
</span></span><span style=display:flex><span>            painter2D.lineCap = LineCap.Round;
</span></span><span style=display:flex><span>            
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            painter2D.BeginPath();
</span></span><span style=display:flex><span>            
</span></span><span style=display:flex><span>            painter2D.MoveTo(<span style=color:#66d9ef>new</span> Vector2((<span style=color:#66d9ef>float</span>)(left + (contentRect.width * <span style=color:#ae81ff>0.2</span>)), (<span style=color:#66d9ef>float</span>)(top + contentRect.height * <span style=color:#ae81ff>0.1</span>)));
</span></span><span style=display:flex><span>            painter2D.LineTo(<span style=color:#66d9ef>new</span> Vector2((<span style=color:#66d9ef>float</span>)(left + (contentRect.width * <span style=color:#ae81ff>0.2</span>)), (<span style=color:#66d9ef>float</span>)(bottom * <span style=color:#ae81ff>0.7</span>)));
</span></span><span style=display:flex><span>            
</span></span><span style=display:flex><span>            painter2D.MoveTo(<span style=color:#66d9ef>new</span> Vector2((<span style=color:#66d9ef>float</span>)(right - (contentRect.width * <span style=color:#ae81ff>0.2</span>)), (<span style=color:#66d9ef>float</span>)(top + contentRect.height * <span style=color:#ae81ff>0.1</span>)));
</span></span><span style=display:flex><span>            painter2D.LineTo(<span style=color:#66d9ef>new</span> Vector2((<span style=color:#66d9ef>float</span>)(right - (contentRect.width * <span style=color:#ae81ff>0.2</span>)), (<span style=color:#66d9ef>float</span>)(bottom * <span style=color:#ae81ff>0.7</span>)));
</span></span><span style=display:flex><span>            
</span></span><span style=display:flex><span>            painter2D.MoveTo(<span style=color:#66d9ef>new</span> Vector2((<span style=color:#66d9ef>float</span>)(left + (contentRect.width * <span style=color:#ae81ff>0.3</span>)), (<span style=color:#66d9ef>float</span>)(bottom * <span style=color:#ae81ff>0.8</span>)));
</span></span><span style=display:flex><span>            painter2D.LineTo(<span style=color:#66d9ef>new</span> Vector2((<span style=color:#66d9ef>float</span>)(right - (contentRect.width * <span style=color:#ae81ff>0.3</span>)), (<span style=color:#66d9ef>float</span>)(bottom * <span style=color:#ae81ff>0.8</span>)));
</span></span><span style=display:flex><span>            
</span></span><span style=display:flex><span>            painter2D.Stroke();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>       }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>In this case, we will consider the <strong>EmojiIconElement</strong> class.</p><p><img loading=lazy src=https://habrastorage.org/getpro/habr/upload_files/955/f5f/527/955f5f527d7ecf12c07471704a8aeeff.png alt=alt></p><p>Yes, that&rsquo;s the interpretation of this smiley face ‚Äì |_|</p><p>Within this chapter, the <code>GenerateVisualContent(...)</code> method and its internals will be covered, and I have already covered the constructor, base class and <code>UxmlFactory</code> in the previous article, in the <a href=https://dtf.ru/gamedev/2215784-razdelyaem-i-vlastvuem-nad-interfeisami-v-unity><strong>Mesh and Triangle</strong></a> chapter!</p><p>I won&rsquo;t drag on with the introduction, let&rsquo;s look at our code.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span><span style=color:#66d9ef>private</span> <span style=color:#66d9ef>void</span> GenerateVisualContent(MeshGenerationContext mgc)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> top = <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> left = <span style=color:#ae81ff>0f</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> right = contentRect.width;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> bottom = contentRect.height;
</span></span><span style=display:flex><span>            
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> painter2D = mgc.painter2D;
</span></span><span style=display:flex><span>    painter2D.lineWidth = <span style=color:#ae81ff>10.0f</span>;
</span></span><span style=display:flex><span>    painter2D.strokeColor = Color.white;
</span></span><span style=display:flex><span>    painter2D.lineJoin = LineJoin.Bevel;
</span></span><span style=display:flex><span>    painter2D.lineCap = LineCap.Round;
</span></span><span style=display:flex><span>            
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    painter2D.BeginPath();
</span></span><span style=display:flex><span>            
</span></span><span style=display:flex><span>    painter2D.MoveTo(<span style=color:#66d9ef>new</span> Vector2((<span style=color:#66d9ef>float</span>)(left + (contentRect.width * <span style=color:#ae81ff>0.2</span>)), (<span style=color:#66d9ef>float</span>)(top + contentRect.height * <span style=color:#ae81ff>0.1</span>)));
</span></span><span style=display:flex><span>    painter2D.LineTo(<span style=color:#66d9ef>new</span> Vector2((<span style=color:#66d9ef>float</span>)(left + (contentRect.width * <span style=color:#ae81ff>0.2</span>)), (<span style=color:#66d9ef>float</span>)(bottom * <span style=color:#ae81ff>0.7</span>)));
</span></span><span style=display:flex><span>            
</span></span><span style=display:flex><span>    painter2D.MoveTo(<span style=color:#66d9ef>new</span> Vector2((<span style=color:#66d9ef>float</span>)(right - (contentRect.width * <span style=color:#ae81ff>0.2</span>)), (<span style=color:#66d9ef>float</span>)(top + contentRect.height * <span style=color:#ae81ff>0.1</span>)));
</span></span><span style=display:flex><span>    painter2D.LineTo(<span style=color:#66d9ef>new</span> Vector2((<span style=color:#66d9ef>float</span>)(right - (contentRect.width * <span style=color:#ae81ff>0.2</span>)), (<span style=color:#66d9ef>float</span>)(bottom * <span style=color:#ae81ff>0.7</span>)));
</span></span><span style=display:flex><span>            
</span></span><span style=display:flex><span>    painter2D.MoveTo(<span style=color:#66d9ef>new</span> Vector2((<span style=color:#66d9ef>float</span>)(left + (contentRect.width * <span style=color:#ae81ff>0.3</span>)), (<span style=color:#66d9ef>float</span>)(bottom * <span style=color:#ae81ff>0.8</span>)));
</span></span><span style=display:flex><span>    painter2D.LineTo(<span style=color:#66d9ef>new</span> Vector2((<span style=color:#66d9ef>float</span>)(right - (contentRect.width * <span style=color:#ae81ff>0.3</span>)), (<span style=color:#66d9ef>float</span>)(bottom * <span style=color:#ae81ff>0.8</span>)));
</span></span><span style=display:flex><span>            
</span></span><span style=display:flex><span>    painter2D.Stroke();
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>As I said earlier, we are interested in the GenerateVisualContent method.</p><p>Briefly, it is activated when our <strong>VisualElement</strong> needs to display our element or regenerate itself _(this usually happens if there have been changes to the UI element).</p><p>The four variables <code>top, left, right, bottom</code> are needed to simplify the handling of positions within our UI element.</p><p>It is also important to note that these variable values will change depending on the size of the UI element (in UI Builder / build), and because of this our UI element will scale relative to the size of the screen and the element itself.</p><p><img loading=lazy src=https://habrastorage.org/getpro/habr/upload_files/f1c/1f7/d0a/f1c1f7d0a185fc888afbd63acdd9ac07.png alt=alt></p><p>It is on this very contentRect that our generation will take place.</p><p>Next we have the description of our <a href=https://docs.unity3d.com/ScriptReference/UIElements.Painter2D.html><strong>painter2D</strong></a> and here we will stop in detail.</p><p>In official language, this is a class that allows you to draw vector graphics.</p><p><em>- How exactly do you draw vector graphics?</em></p><p><em>- Good question!</em></p><p>It provides various API calls that can be used to draw lines, arcs, curves.</p><p>Also, it has various properties that affect the result of sketching:</p><ul><li><p>lineWidth - responsible for the line width</p></li><li><p>strokeColor - stroke color</p></li><li><p>fillColor - fill color</p></li><li><p>lineJoin - how the line will look like when connected</p></li><li><p>lineCap - how the line ends will look like</p></li></ul><p><img loading=lazy src=https://habrastorage.org/getpro/habr/upload_files/8d4/8a3/b35/8d48a3b35d97b1e76172bef6706b4ad1.png alt=alt></p><p>More clearly how it looks like</p><p>We have decided how to prepare our <strong>painter2D</strong>, now let&rsquo;s see how paths are handled in graphical programming.</p><p>In the context of graphical programming, a ‚Äúpath‚Äù is a sequence of geometric shapes such as lines, curves, rectangles and circles that define the shape or contour of an object.</p><p>A path can be open or closed.</p><ul><li><p><strong>Open path:</strong> Starts and ends with no endpoints connected.</p></li><li><p><strong>Closed path:</strong> The endpoints of a path are connected, forming a closed shape.</p></li></ul><ol><li><p><strong>Beginning of a new path</strong>: This step defines the start of a new vector path. When <code>BeginPath()</code> is called, you begin writing drawing commands for the new path.</p></li><li><p><strong>Add Drawing Commands:</strong> After starting a new path, you add drawing commands, such as <code>ArcTo()</code>, <code>LineTo()</code>, and others, to create shapes and geometric objects in your path.</p></li><li><p><strong>Path Completion</strong>: After you have drawn all the necessary shapes and geometric objects for the current path, you call <code>ClosePath()</code> to end the path.<br>This indicates to the graphics engine that you have finished drawing this path and that it should render it.</p></li></ol><p>Let&rsquo;s now go back to our example and break down what we are doing:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span>painter2D.BeginPath();
</span></span><span style=display:flex><span>            
</span></span><span style=display:flex><span>painter2D.MoveTo(<span style=color:#66d9ef>new</span> Vector2((<span style=color:#66d9ef>float</span>)(left + (contentRect.width * <span style=color:#ae81ff>0.2</span>)), (<span style=color:#66d9ef>float</span>)(top + contentRect.height * <span style=color:#ae81ff>0.1</span>)));
</span></span><span style=display:flex><span>painter2D.LineTo(<span style=color:#66d9ef>new</span> Vector2((<span style=color:#66d9ef>float</span>)(left + (contentRect.width * <span style=color:#ae81ff>0.2</span>)), (<span style=color:#66d9ef>float</span>)(bottom * <span style=color:#ae81ff>0.7</span>)));
</span></span><span style=display:flex><span>            
</span></span><span style=display:flex><span>painter2D.MoveTo(<span style=color:#66d9ef>new</span> Vector2((<span style=color:#66d9ef>float</span>)(right - (contentRect.width * <span style=color:#ae81ff>0.2</span>)), (<span style=color:#66d9ef>float</span>)(top + contentRect.height * <span style=color:#ae81ff>0.1</span>)));
</span></span><span style=display:flex><span>painter2D.LineTo(<span style=color:#66d9ef>new</span> Vector2((<span style=color:#66d9ef>float</span>)(right - (contentRect.width * <span style=color:#ae81ff>0.2</span>)), (<span style=color:#66d9ef>float</span>)(bottom * <span style=color:#ae81ff>0.7</span>)));
</span></span><span style=display:flex><span>            
</span></span><span style=display:flex><span>painter2D.MoveTo(<span style=color:#66d9ef>new</span> Vector2((<span style=color:#66d9ef>float</span>)(left + (contentRect.width * <span style=color:#ae81ff>0.3</span>)), (<span style=color:#66d9ef>float</span>)(bottom * <span style=color:#ae81ff>0.8</span>)));
</span></span><span style=display:flex><span>painter2D.LineTo(<span style=color:#66d9ef>new</span> Vector2((<span style=color:#66d9ef>float</span>)(right - (contentRect.width * <span style=color:#ae81ff>0.3</span>)), (<span style=color:#66d9ef>float</span>)(bottom * <span style=color:#ae81ff>0.8</span>)));
</span></span><span style=display:flex><span>            
</span></span><span style=display:flex><span>painter2D.Stroke();
</span></span></code></pre></div><p>We start with the <code>BeginPath()</code> command, after which we call the <code>MoveTo(Vector2 pos)</code> method - which moves the drawing point to a new position from which the following commands will be executed.</p><p>It is followed by the <code>LineTo(Vector2 pos)</code> method, which, as you can understand from the name, draws a straight line from the current <code>painter2D</code> position to the position specified in the method argument.</p><p>Next comes two command packs that move the drawing cursor and draw the line.</p><p>At the end, we can notice the <code>Stroke()</code> method - which directly draws the outline of the current path we defined earlier.</p><p>After calling the method, the current path will be drawn on the canvas using the current stroke style such as line color and thickness.</p><p>Congratulations, you now have a custom UI element!</p><h2 id=chapter-2-curves>Chapter 2: Curves!<a hidden class=anchor aria-hidden=true href=#chapter-2-curves>#</a></h2><p>We have two different options for being able to draw curved lines:</p><ol><li><p>The <code>BezierCurveTo()</code> method generates a cubic B√©zier curve from two control points and the final position of the cubic B√©zier curve.</p></li><li><p>The <code>QuadraticCurveTo()</code> method generates a quadratic B√©zier curve by a control point and the end position of a quadratic B√©zier curve.</p></li></ol><p>Let&rsquo;s consider their use:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span>painter2D.BeginPath();
</span></span><span style=display:flex><span>painter2D.MoveTo(<span style=color:#66d9ef>new</span> Vector2(<span style=color:#ae81ff>100</span>, <span style=color:#ae81ff>100</span>));
</span></span><span style=display:flex><span>painter2D.BezierCurveTo(<span style=color:#66d9ef>new</span> Vector2(<span style=color:#ae81ff>150</span>, <span style=color:#ae81ff>150</span>), <span style=color:#66d9ef>new</span> Vector2(<span style=color:#ae81ff>200</span>, <span style=color:#ae81ff>50</span>), <span style=color:#66d9ef>new</span> Vector2(<span style=color:#ae81ff>250</span>, <span style=color:#ae81ff>100</span>));
</span></span><span style=display:flex><span>painter2D.Stroke();
</span></span></code></pre></div><p><img loading=lazy src=https://habrastorage.org/getpro/habr/upload_files/e96/5dc/4a2/e965dc4a2213dba9f3d19973cc4a23cd.png alt=alt></p><p>Bezier curve</p><p>And we will also give the code for the second example:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span>painter2D.BeginPath();
</span></span><span style=display:flex><span>painter2D.MoveTo(<span style=color:#66d9ef>new</span> Vector2(<span style=color:#ae81ff>100</span>, <span style=color:#ae81ff>100</span>));
</span></span><span style=display:flex><span>painter2D.QuadraticCurveTo(<span style=color:#66d9ef>new</span> Vector2(<span style=color:#ae81ff>150</span>, <span style=color:#ae81ff>150</span>), <span style=color:#66d9ef>new</span> Vector2(<span style=color:#ae81ff>250</span>, <span style=color:#ae81ff>100</span>));
</span></span><span style=display:flex><span>painter2D.Stroke();
</span></span></code></pre></div><p><img loading=lazy src=https://habrastorage.org/getpro/habr/upload_files/058/b08/55a/058b0855a5dbdb1b7628dc1b816dd59a.png alt=alt></p><p>Quadratic B√©zier curve</p><p>For a deeper understanding of B√©zier curves, we read <a href=https://ru.wikipedia.org/wiki/%D0%9A%D1%80%D0%B8%D0%B2%D0%B0%D1%8F_%D0%91%D0%B5%D0%B7%D1%8C%D0%B5>Wikipedia</a>.</p><h2 id=chapter-3-arcs>Chapter 3: Arcs!<a hidden class=anchor aria-hidden=true href=#chapter-3-arcs>#</a></h2><p>You can use the following methods to draw arcs:</p><ol><li><p>The <code>Arc()</code> method creates an arc based on the arc center, radius, and start and end angles provided.</p></li><li><p>The <code>ArcTo()</code> method creates an arc between two straight segments.</p></li></ol><p>As part of drawing arcs, it&rsquo;s also worth talking about filling the path.</p><p>When at the end of the path we get a <a href=closedPath>closedPath</a>, then we can paint it in some color by calling the <code>painter2D.Fill()</code> method.</p><p>Let&rsquo;s consider an example of building an arc using the <code>Arc()</code> method .</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span>painter2D.lineWidth = <span style=color:#ae81ff>2.0f</span>;
</span></span><span style=display:flex><span>painter2D.strokeColor = Color.red;
</span></span><span style=display:flex><span>painter2D.fillColor = Color.blue;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>painter2D.BeginPath();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>painter2D.MoveTo(<span style=color:#66d9ef>new</span> Vector2(<span style=color:#ae81ff>100</span>, <span style=color:#ae81ff>100</span>));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>painter2D.Arc(<span style=color:#66d9ef>new</span> Vector2(<span style=color:#ae81ff>100</span>, <span style=color:#ae81ff>100</span>), <span style=color:#ae81ff>50.0f</span>, <span style=color:#ae81ff>10.0f</span>, <span style=color:#ae81ff>95.0f</span>);
</span></span><span style=display:flex><span>painter2D.ClosePath();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>painter2D.Fill();
</span></span><span style=display:flex><span>painter2D.Stroke();
</span></span></code></pre></div><p>And <code>painter2D.FillColor</code> will define fill color.</p><p><img loading=lazy src=https://habrastorage.org/getpro/habr/upload_files/609/08c/193/60908c1935182d6b22f1d237fd11ffb4.png alt=alt></p><p>Red outline and blue fill.</p><p>Using <code>painter2D.ArcTo()</code>, we can draw a curve:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span>painter2D.BeginPath();
</span></span><span style=display:flex><span>painter2D.MoveTo(<span style=color:#66d9ef>new</span> Vector2(<span style=color:#ae81ff>100</span>, <span style=color:#ae81ff>100</span>));
</span></span><span style=display:flex><span>painter2D.ArcTo(<span style=color:#66d9ef>new</span> Vector2(<span style=color:#ae81ff>150</span>, <span style=color:#ae81ff>150</span>), <span style=color:#66d9ef>new</span> Vector2(<span style=color:#ae81ff>200</span>, <span style=color:#ae81ff>100</span>), <span style=color:#ae81ff>20.0f</span>);
</span></span><span style=display:flex><span>painter2D.LineTo(<span style=color:#66d9ef>new</span> Vector2(<span style=color:#ae81ff>200</span>, <span style=color:#ae81ff>100</span>));
</span></span><span style=display:flex><span>painter2D.Stroke();
</span></span></code></pre></div><p><img loading=lazy src=https://habrastorage.org/getpro/habr/upload_files/07f/7b8/629/07f7b862986f28c95b92f16678f1cc67.png alt=alt></p><p>Curve through arc</p><p>You may have wondered if you can use the <code>Arc()</code> method to draw a circle or a pie chart.</p><p><em>‚Äì Well, of course you can</em></p><p>Just check <a href=https://docs.unity3d.com/2022.3/Documentation/Manual/UIE-pie-chart.html>documentation</a> from Unity.</p><h2 id=chapter-4-the-rest>Chapter 4: The rest?<a hidden class=anchor aria-hidden=true href=#chapter-4-the-rest>#</a></h2><p>Here I want to cover some stuff that didn&rsquo;t make it into the other chapters, and some other comments on drawing.</p><p>The first thing I want to talk about is holes in fills.</p><p>When you call <code>Fill()</code> to fill an area contained within a path, you can also create &ldquo;holes&rdquo; in that filled area using additional subpaths.</p><p>To create a hole, you must create an additional subpath using <code>MoveTo()</code>, and then use a fill rule to determine which areas get filled and which don&rsquo;t.</p><p>Here are the two basic fill rules:</p><ol><li><p><strong>OddEven:</strong> Draw a ray from the given point to infinity in any direction, and count the number of intersections with path segments. If the number of intersections is odd, the point is considered inside the path, if the number of intersections is even, the point is considered outside.</p></li><li><p><strong>NonZero:</strong> Draws a ray from the given point to infinity in any direction, and counts the intersections of the path segments. When segments intersect the ray from right to left, the counter is decremented, and when segments intersect the ray from left to right, the counter is incremented. If the counter is zero, the point is considered outside the path, otherwise, it is considered inside.</p></li></ol><p>So you can use these rules to create a hole in a filled area by defining a subpath that defines the outline of the hole, and using a fill rule to specify how the areas should be filled.</p><p>The code above creates a rectangle with an additional subpath that defines a diamond shape inside the rectangle. This diamond will be the &ldquo;hole&rdquo; in the filled area of the rectangle.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span>painter2D.BeginPath();
</span></span><span style=display:flex><span>painter2D.MoveTo(<span style=color:#66d9ef>new</span> Vector2(<span style=color:#ae81ff>10</span>, <span style=color:#ae81ff>10</span>));
</span></span><span style=display:flex><span>painter2D.LineTo(<span style=color:#66d9ef>new</span> Vector2(<span style=color:#ae81ff>300</span>, <span style=color:#ae81ff>10</span>));
</span></span><span style=display:flex><span>painter2D.LineTo(<span style=color:#66d9ef>new</span> Vector2(<span style=color:#ae81ff>300</span>, <span style=color:#ae81ff>150</span>));
</span></span><span style=display:flex><span>painter2D.LineTo(<span style=color:#66d9ef>new</span> Vector2(<span style=color:#ae81ff>10</span>, <span style=color:#ae81ff>150</span>));
</span></span><span style=display:flex><span>painter2D.ClosePath();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>painter2D.MoveTo(<span style=color:#66d9ef>new</span> Vector2(<span style=color:#ae81ff>150</span>, <span style=color:#ae81ff>50</span>));
</span></span><span style=display:flex><span>painter2D.LineTo(<span style=color:#66d9ef>new</span> Vector2(<span style=color:#ae81ff>175</span>, <span style=color:#ae81ff>75</span>));
</span></span><span style=display:flex><span>painter2D.LineTo(<span style=color:#66d9ef>new</span> Vector2(<span style=color:#ae81ff>150</span>, <span style=color:#ae81ff>100</span>));
</span></span><span style=display:flex><span>painter2D.LineTo(<span style=color:#66d9ef>new</span> Vector2(<span style=color:#ae81ff>125</span>, <span style=color:#ae81ff>75</span>));
</span></span><span style=display:flex><span>painter2D.ClosePath();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>painter2D.Fill(FillRule.OddEven);
</span></span></code></pre></div><p><img loading=lazy src=https://habrastorage.org/getpro/habr/upload_files/da7/a20/d44/da7a20d448dc1c34ff18dd5cc4ee6b0a.png alt=alt></p><p>Rectangle with a holes;</p><p>Second, it is possible to customize styles in each subpath.</p><p>To do this, you need to use the <code>BeginPath()</code> and <code>ClosePath()</code> methods and change the values in <code>painter2D</code> between them.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span><span style=color:#66d9ef>private</span> <span style=color:#66d9ef>void</span> GenerateVisualContent(MeshGenerationContext mgc)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> painter2D = mgc.painter2D;
</span></span><span style=display:flex><span>    painter2D.lineWidth = <span style=color:#ae81ff>10.0f</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// First subpath starts</span>
</span></span><span style=display:flex><span>    painter2D.BeginPath();
</span></span><span style=display:flex><span>    painter2D.strokeColor = Color.red;
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    painter2D.MoveTo(<span style=color:#66d9ef>new</span> Vector2(<span style=color:#ae81ff>50</span>, <span style=color:#ae81ff>50</span>));
</span></span><span style=display:flex><span>    painter2D.LineTo(<span style=color:#66d9ef>new</span> Vector2(<span style=color:#ae81ff>100</span>, <span style=color:#ae81ff>100</span>));
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    painter2D.Stroke();
</span></span><span style=display:flex><span>    painter2D.ClosePath();
</span></span><span style=display:flex><span>    <span style=color:#75715e>// End of first subpath</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Second subpath starts</span>
</span></span><span style=display:flex><span>    painter2D.BeginPath();
</span></span><span style=display:flex><span>    painter2D.strokeColor = Color.blue;
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    painter2D.MoveTo(<span style=color:#66d9ef>new</span> Vector2(<span style=color:#ae81ff>20</span>, <span style=color:#ae81ff>20</span>));
</span></span><span style=display:flex><span>    painter2D.LineTo(<span style=color:#66d9ef>new</span> Vector2(<span style=color:#ae81ff>60</span>, <span style=color:#ae81ff>60</span>));
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    painter2D.Stroke();
</span></span><span style=display:flex><span>    painter2D.ClosePath();
</span></span><span style=display:flex><span>    <span style=color:#75715e>// End of second subpath</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Third subpath starts</span>
</span></span><span style=display:flex><span>    painter2D.BeginPath();
</span></span><span style=display:flex><span>    painter2D.strokeGradient = <span style=color:#66d9ef>new</span> Gradient()
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        colorKeys = <span style=color:#66d9ef>new</span> GradientColorKey[]
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>new</span>() { color = Color.red, time = <span style=color:#ae81ff>0.0f</span> },
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>new</span>() { color = Color.blue, time = <span style=color:#ae81ff>1.0f</span> }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>    painter2D.fillColor = Color.green;
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    painter2D.MoveTo(<span style=color:#66d9ef>new</span> Vector2(<span style=color:#ae81ff>50</span>, <span style=color:#ae81ff>150</span>));
</span></span><span style=display:flex><span>    painter2D.LineTo(<span style=color:#66d9ef>new</span> Vector2(<span style=color:#ae81ff>100</span>, <span style=color:#ae81ff>200</span>));
</span></span><span style=display:flex><span>    painter2D.LineTo(<span style=color:#66d9ef>new</span> Vector2(<span style=color:#ae81ff>150</span>, <span style=color:#ae81ff>150</span>));
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    painter2D.Fill();
</span></span><span style=display:flex><span>    painter2D.Stroke();
</span></span><span style=display:flex><span>            
</span></span><span style=display:flex><span>    painter2D.ClosePath();
</span></span><span style=display:flex><span>    <span style=color:#75715e>// End of subpaths </span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><img loading=lazy src=https://habrastorage.org/getpro/habr/upload_files/378/bf4/404/378bf4404732002951c86d2ad1e39220.png alt=alt></p><p>Three different styles.</p><p>An attentive viewer has already noticed the next feature ‚Äì support for gradients for strokes.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span>painter2D.strokeGradient = <span style=color:#66d9ef>new</span> Gradient()
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    colorKeys = <span style=color:#66d9ef>new</span> GradientColorKey[]
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>new</span>() { color = Color.red, time = <span style=color:#ae81ff>0.0f</span> },
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>new</span>() { color = Color.blue, time = <span style=color:#ae81ff>1.0f</span> }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><p>Using the <code>strokeGradient</code> property you can draw a stroke through a gradient.</p><h2 id=chapter-5-conclusion>Chapter 5: Conclusion<a hidden class=anchor aria-hidden=true href=#chapter-5-conclusion>#</a></h2><p>Congratulations on reading this article to the end.</p><p>Today we figured out how to draw custom elements in interfaces, what tools are available for this in the Unity engine.</p><p>For a deeper dive and study of creating interface elements, I recommend the official <a href=https://docs.unity3d.com/2022.3/Documentation/Manual/UIE-ui-renderer.html>documentation</a>.</p><p>If you have any questions or did not understand some part, write in the comments, I will try to explain what and how :)</p><p>Thank you for your attention and see you soon</p></div><footer class=post-footer><ul class=post-tags></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=http://localhost:1313/>linar.dev</a></span> ¬∑
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>