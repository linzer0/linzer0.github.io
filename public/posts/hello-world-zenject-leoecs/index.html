<!doctype html><html lang=en dir=auto><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="noindex, nofollow"><title>Hello World Zenject Leoecs | linar.dev</title>
<meta name=keywords content><meta name=description content="How to write Hello World using LeoEcs & Zenject
Preparation
Firstly, we need to install Zenject and LeoEcs.
LeoEcs has two versions, one based on structures and one based on classes.
Within the framework of this tutorial, it makes no difference which one to use, I will use the version on structures.
Usage
After installation, we need to create Scene Context in our Scene.
Right Click inside the Hierarchy tab and select Zenject -> Scene Context"><meta name=author content><link rel=canonical href=http://localhost:1313/posts/hello-world-zenject-leoecs/><link crossorigin=anonymous href=/assets/css/stylesheet.fc220c15db4aef0318bbf30adc45d33d4d7c88deff3238b23eb255afdc472ca6.css integrity="sha256-/CIMFdtK7wMYu/MK3EXTPU18iN7/MjiyPrJVr9xHLKY=" rel="preload stylesheet" as=style><link rel=icon href=http://localhost:1313/favicon.ico><link rel=icon type=image/png sizes=16x16 href=http://localhost:1313/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=http://localhost:1313/favicon-32x32.png><link rel=apple-touch-icon href=http://localhost:1313/apple-touch-icon.png><link rel=mask-icon href=http://localhost:1313/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=http://localhost:1313/posts/hello-world-zenject-leoecs/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=http://localhost:1313/ accesskey=h title="linar.dev (Alt + H)">linar.dev</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=http://localhost:1313/archives title=Archive><span>Archive</span></a></li><li><a href=http://localhost:1313/posts/ title=Posts><span>Posts</span></a></li><li><a href=http://localhost:1313/tags/ title=Tags><span>Tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">Hello World Zenject Leoecs</h1><div class=post-meta><span title='2024-10-27 14:56:20 +0700 +07'>October 27, 2024</span>&nbsp;Â·&nbsp;2 min</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#how-to-write-hello-world-using-leoecs--zenject aria-label="How to write Hello World using LeoEcs & Zenject">How to write Hello World using LeoEcs & Zenject</a><ul><li><a href=#preparation aria-label=Preparation>Preparation</a></li><li><a href=#usage aria-label=Usage>Usage</a></li></ul></li></ul></div></details></div><div class=post-content><h1 id=how-to-write-hello-world-using-leoecs--zenject>How to write Hello World using LeoEcs & Zenject<a hidden class=anchor aria-hidden=true href=#how-to-write-hello-world-using-leoecs--zenject>#</a></h1><h2 id=preparation>Preparation<a hidden class=anchor aria-hidden=true href=#preparation>#</a></h2><p>Firstly, we need to install <a href=https://github.com/modesttree/Zenject>Zenject</a> and <a href=https://github.com/Leopotam/ecs>LeoEcs</a>.</p><p><em>LeoEcs has two versions, one based on structures and one based on classes.
Within the framework of this tutorial, it makes no difference which one to use, I will use the version on structures.</em></p><h2 id=usage>Usage<a hidden class=anchor aria-hidden=true href=#usage>#</a></h2><p>After installation, we need to create <strong>Scene Context</strong> in our Scene.
Right Click inside the Hierarchy tab and select <code>Zenject -> Scene Context</code></p><p><a href=https://postimg.cc/S2Z41KCf><img loading=lazy src=https://i.postimg.cc/vTymBgmk/Create-Scene-Context.png alt=Create-Scene-Context.png></a></p><p>Now, create three scripts: <code>StartupInstaller</code>, <code>StartupSystemsExecutor</code>, <code>HelloWorldSystem</code>.</p><p><strong>StartupInstaller</strong> will bind our Systems and EcsWorld to DI-container.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span><span style=color:#66d9ef>using</span> Leopotam.Ecs;
</span></span><span style=display:flex><span><span style=color:#66d9ef>using</span> Zenject;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>StartupInstaller</span> : MonoInstaller
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>override</span> <span style=color:#66d9ef>void</span> InstallBindings()
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        Container.BindInstance(<span style=color:#66d9ef>new</span> EcsWorld());
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        Container.Bind&lt;HelloWorldSystem&gt;().AsSingle();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        Container.BindInterfacesAndSelfTo&lt;StartupSystemsExecutor&gt;()
</span></span><span style=display:flex><span>            .AsSingle()
</span></span><span style=display:flex><span>            .NonLazy();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><strong>StartupSystemsExecutor</strong> will <code>Init()</code> and <code>Run()</code> binded systems.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span><span style=color:#66d9ef>using</span> System;
</span></span><span style=display:flex><span><span style=color:#66d9ef>using</span> Leopotam.Ecs;
</span></span><span style=display:flex><span><span style=color:#66d9ef>using</span> Zenject;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>StartupSystemsExecutor</span> : IDisposable, ITickable
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>readonly</span> EcsSystems _systems;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> EcsWorld _world;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> StartupSystemsExecutor(EcsWorld ecsWorld, HelloWorldSystem helloWorldSystem)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        _systems = <span style=color:#66d9ef>new</span> EcsSystems(ecsWorld);
</span></span><span style=display:flex><span>        _world = ecsWorld;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        _systems.Add(helloWorldSystem);
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        _systems.Init();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> Dispose()
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        _systems.Destroy();
</span></span><span style=display:flex><span>        _world.Destroy();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> Tick()
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        _systems.Run();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><strong>HelloWorldSystem</strong> will print &ldquo;Hello World&rdquo; in Console.</p><pre tabindex=0><code>using Leopotam.Ecs;
using UnityEngine;

public class HelloWorldSystem : IEcsInitSystem
{
    public void Init()
    {
        PrintText(&#34;Hello World&#34;);
    }

    private void PrintText(string text)
    {
        Debug.Log(text);
    }
}
</code></pre><p>We need to add <code>StartupInstaller</code> to <strong>SceneContext</strong> which we created on scene.</p><p><a href=https://postimg.cc/6yX4xjv2><img loading=lazy src=https://i.postimg.cc/FsfycwFZ/02-Startup-installer-added-to-scene-context.png alt=02-Startup-installer-added-to-scene-context.png></a></p><p>And click Run</p><p><a href=https://postimg.cc/YhL78M9Q><img loading=lazy src=https://i.postimg.cc/Qx0M8MZY/Console-output.png alt=Console-output.png></a></p></div><footer class=post-footer><ul class=post-tags></ul></footer></article></main><footer class=footer><span>&copy; 2024 <a href=http://localhost:1313/>linar.dev</a></span> Â·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>